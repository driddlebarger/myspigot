<p id="notice"><%= notice %></p>



 <div class="container">
    <div id='map' class='map pad2' style='height: 500px;'></div>
    <script>
    $(document).ready(function() {

    mapboxgl.accessToken = 'pk.eyJ1IjoiZHJpZGRsZWJhcmdlciIsImEiOiJjajh3aWhkbDMxczRiMzJvNGQ0azU3NjN5In0.o2fPEeGh3pH2-AeAAR0seQ';
    
      var map = new mapboxgl.Map({
      container: 'map',
      style: 'mapbox://styles/mapbox/light-v9',
        center: [-118.33, 33.83], // starting position [lng, lat]
        zoom: 10.5 // starting zoom
      });
      var myLayer = L.mapbox.featurelayer().addTo(map);

      myLayer.on('layeradd', function(e) {
          var location
          location = e.layer;
      });
    
      $.ajax({
          dataType: 'text',
          url: './locations.json',
          success: function(data) {
            var geojson = $.parseJSON(data);
            return myLayer.setGeoJSON(geojson);
          },
          error:function() {
            alert("Could not load the events");
          }
      }); 
    }); 

    </script>


</div> 


<!--

<h1>Locations</h1>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Address</th>
      <th>Latitude</th>
      <th>Longitude</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @locations.each do |location| %>
      <tr>
        <td><%= location.name %></td>
        <td><%= location.address %></td>
        <td><%= location.latitude %></td>
        <td><%= location.longitude %></td>
        <td><%= link_to 'Show', location %></td>
        <td><%= link_to 'Edit', edit_location_path(location) %></td>
        <td><%= link_to 'Destroy', location, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<%= link_to 'New Location', new_location_path %>

-->
